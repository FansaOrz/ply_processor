# ply_processor

- 由于要做成通用的 PLY 解析和压缩结构，因此每处理一个 PLY 格式的文件时，需要先生成一个 config 文件，指定哪些属性要当成一个 vector，例如：每个 3dgs 的 48 维的 sh 系数，要加载到同一个 vector 中，作为一个向量整体，去做向量量化。同时 config 中要指定每类元素的压缩方式。本项目已经给出了一个 3dgs 的样例 config 文件。

## 整体流程

### 压缩流程

- 加载对应的 config 文件，确认需要加载哪些属性，哪些需要使用向量压缩，哪些需要使用标量压缩，哪些需要使用 Huffman 压缩，以及哪些要放到一个 vector 中。
- 读取 PLY 文件并解析 ply 文件，根据 PLY 的 header，保存相应的属性信息，把信息保存到 dataloader 中。
- 根据 config 内容，分别对不同的属性进行压缩，并保存相应的压缩信息和属性信息（除了压缩后的数据，还有 codebook 等信息）
- 把属性信息写入 bin 的 header 中，压缩后的数据写入 bin 的内容

### 解压流程

- 读取 bin 文件头，根据 header 信息，读取相应的属性信息，包括属性名称、类型、压缩类型、codebook 等
- 根据属性信息，对属性进行解压（Huffman 解码、向量量化解码、标量量化解码），并把解压之后的数据保存到 dataloader 中，供后续使用。
